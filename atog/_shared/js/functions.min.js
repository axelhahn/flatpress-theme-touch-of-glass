/* https://www.axel-hahn.de/ */
var aDomNames={cat:"widget-categories",catInput:"eCatFilter",archive:"widget-archives"};String.prototype.highlight=function(h,k,e){var g=this,d=/([(){}|*+?.,^$\[\]\\])/g,e=!e?"i":"",b=function(l,f){return g.lastIndexOf("<",f)>g.lastIndexOf(">",f)?l:k(l,j)};for(var j=-1,a=(h=h instanceof Array?h:[h]).length;++j<a;){g=g.replace(new RegExp(h[j].replace(d,"\\$1"),"gm"+e),b)}return g};function c(b,a){return'<span class="bg'+a+'">'+b+"</span>"}function addCategoryFilter(){var d=document.querySelectorAll("#"+aDomNames.cat+" a");if(d.length<10){return false}var b=document.getElementById(aDomNames.cat);var a="filterCategories(); return false;";var f=localStorage.getItem(aDomNames.catInput)?localStorage.getItem(aDomNames.catInput):"";var e='\n        <input type="text" id="'+aDomNames.catInput+'" style="width:90%;"\n            onchange="'+a+'" \n            onkeyup="'+a+'"\n            value="'+f+'"\n            ><br><br>';b.innerHTML=b.innerHTML.replace("</h4>","</h4>"+e);filterCategories();return true}function filterCategories(){var g=document.getElementById(aDomNames.catInput).value;var f=new RegExp(g,"i");var e=new Array();e=g.split(" ");console.log(e);var a=document.querySelectorAll("#"+aDomNames.cat+" a");var b=false;for(var d=0;d<a.length;d++){b=!g||a[d].innerText.indexOf(g)>=0||f.test(a[d].innerText);a[d].style=b?"display: block":"display: none";a[d].innerHTML=a[d].innerText.replace("&gt;","");a[d].innerHTML=a[d].innerHTML.highlight(e,c)}localStorage.setItem(aDomNames.catInput,g)}function getCategoryLink(){var a="";var d=location.href.match(/\/category\/([a-z0-9]*)/i);if(d){a+="/category/"+d[1]+"/"}else{d=location.href.match(/x=cat:([0-9]*)/);if(d){a+="?x=cat:"+d[1]}}if(!a){return false}var b=document.querySelectorAll("#"+aDomNames.cat+' a[href*="'+a+'"]');return b[0]}function highlightItem(o){var g="mark";var h=document.querySelectorAll("#main a");var q=new RegExp("x=cat:(.*)");var p=new RegExp("/category/(.*)$");for(var f=0;f<h.length;f++){if(q.test(h[f].href)||p.test(h[f].href)){var e=document.querySelectorAll("#"+aDomNames.cat+' a[href="'+h[f].href+'"]');for(var d=0;d<e.length;d++){e[d].className=g}}}var n=o.substr(5,2);var b=o.substr(7,2);var l="#"+aDomNames.archive+' a[href*="y:'+n+";m:"+b+'"]';var k="#"+aDomNames.archive+' a[href*="/20'+n+"/"+b+'/"]';var a=document.querySelectorAll(l);for(var d=0;d<a.length;d++){a[d].className=g}var a=document.querySelectorAll(k);for(var d=0;d<a.length;d++){a[d].className=g}}function highlightMenubar(){var b=document.querySelectorAll("#menubar a");for(var a=0;a<b.length;a++){if(b[a].href==location.href){b[a].className="active";setHeaderLabel(b[a].innerHTML)}}}function setHeaderLabel(a){var b=document.getElementById("headerfilter");if(b&&a){b.innerHTML=a;return true}return false}function setActive(h,b,j){var a=document.querySelectorAll("#"+h+" a");var f=new RegExp(b+"$");var d=new RegExp(b+"&");var e=new RegExp("/"+j+"/$","i");for(var g=0;g<a.length;g++){if((f.test(a[g].href))||(d.test(a[g].href))||(e.test(a[g].href))){a[g].className="active";setHeaderLabel(a[g].innerHTML)}}}function pageInit(){var a=getCategoryLink();if(a){a.className="active";setHeaderLabel(a.innerHTML)}addCategoryFilter();highlightMenubar()};